{% from "../button/macro.njk" import button with context %}
{% from "../error-message/macro.njk" import errorMessage with context %}
{% from "../input/macro.njk" import input with context %}
{% set id = opts.id or opts.name | slugify({ decamelize: true }) %}
{% call input({
  field: {
    attributes: {
      "data-controller": "geo-input",
      "data-geo-input-denied-value": __("geoInput.denied"),
      "data-geo-input-failed-value": __("geoInput.failed")
    }
  },
  classes: opts.classes,
  id: id,
  name: opts.name,
  value: opts.value,
  label: opts.label,
  hint: opts.hint,
  optional: opts.optional,
  attributes: { "data-geo-input-target": "geo" },
  errorMessage: opts.errorMessage
}) %}
  <template data-geo-input-target="findButton">
    {{ button({
      classes: "button--secondary",
      type: "button",
      text: __("geoInput.getCurrentPosition"),
      attributes: { "data-action": "geo-input#find" }
    }) | indent(4) }}
  </template>
  <template data-geo-input-target="errorMessage">
    {{ errorMessage({
      id: id + "-error"
    }) | indent(4) }}
  </template>
{% endcall %}